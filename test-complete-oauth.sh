#!/bin/bash

echo "üß™ Complete Google OAuth Test"
echo "=========================="
echo ""

echo "‚úÖ Current Status:"
echo "   ‚Ä¢ Web Server: http://localhost:5173/"
echo "   ‚Ä¢ API Server: http://localhost:5800/"
echo "   ‚Ä¢ Google Client ID: 351029698035-6kueu4as5bce178bimna3noa92ogc2tl.apps.googleusercontent.com"
echo ""

echo "üîó Test Google OAuth Flow:"
echo "1. Open browser and go to: http://localhost:5173/"
echo "2. Click in the chat input area to trigger login modal"
echo "3. Click 'Sign in with Google' button"
echo "4. You should be redirected to Google's OAuth consent screen"
echo "5. Sign in with your Google account"
echo "6. Grant permissions for email and profile access"
echo "7. You'll be redirected back to: http://localhost:5800/v1/auth/callback/google"
echo "8. If successful, you'll see a success page with your profile"
echo "9. The window will close automatically and you'll be logged in"
echo ""

echo "üîç If you get a 404 error:"
echo "   ‚Ä¢ The redirect URI in Google Cloud Console doesn't match"
echo "   ‚Ä¢ Go to: https://console.cloud.google.com/"
echo "   ‚Ä¢ Navigate to: APIs & Services ‚Üí Credentials"
echo "   ‚Ä¢ Find your OAuth 2.0 Client ID and click EDIT"
echo "   ‚Ä¢ In 'Authorized redirect URIs', add exactly:"
echo "     http://localhost:5800/v1/auth/callback/google"
echo "   ‚Ä¢ Remove any other redirect URIs"
echo "   ‚Ä¢ Click SAVE"
echo "   ‚Ä¢ Wait 2-3 minutes for changes to propagate"
echo "   ‚Ä¢ Try the OAuth flow again"
echo ""

echo "üéØ Success Criteria:"
echo "   ‚úÖ Login modal shows Google button"
echo "   ‚úÖ Google button redirects to Google OAuth"
echo "   ‚úÖ After authentication, redirected back to app"
echo "   ‚úÖ Success page shows your Google profile"
echo "   ‚úÖ Window closes automatically"
echo "   ‚úÖ You're logged into the main application"
echo ""

echo "üöÄ Ready to test! Visit http://localhost:5173/ now!"